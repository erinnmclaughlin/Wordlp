@page "/"
@inject WordCollection WordCollection

<PageTitle>Word-LP</PageTitle>

<GameBoard Guess="@Guess" PreviousGuesses="PreviousGuesses" />
<Keyboard OnKeyPress="AddLetter" OnBackspace="Backspace" OnSubmit="SubmitGuess" />

@code {

    private List<string> PreviousGuesses { get; set; } = new();
    private string Guess { get; set; } = string.Empty;
    private Word? RandomWord { get; set; }

    protected override void OnInitialized()
    {
        GetRandomWord();
    }

    private void GetRandomWord()
    {
        RandomWord = WordCollection.GetRandomWord();
    }

    public void AddLetter(char letter)
    {
        if (Guess.Length >= 5)
            return;

        Guess += letter;
    }

    public void Backspace()
    {
        Guess = Guess.Substring(0, Math.Max(0, Guess.Length - 1));
    }

    public void SubmitGuess()
    {
        if (Guess.Length != 5) return;

        PreviousGuesses.Add(Guess);
        Guess = string.Empty;
    }
}