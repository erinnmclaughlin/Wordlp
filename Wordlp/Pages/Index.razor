@page "/"
@inject Game Game

<PageTitle>Word-LP</PageTitle>

<CascadingValue Value="Game">
    <GameBoard Guess="@Guess" />
    <Keyboard OnKeyPress="AddLetter" OnBackspace="Backspace" OnSubmit="SubmitGuess" />
    <GameOverModal OnClose="StartNewGame" />
</CascadingValue>

@code {

    private string Guess { get; set; } = string.Empty;

    public void AddLetter(char letter)
    {
        if (Guess.Length >= 5)
            return;

        Guess += letter;
    }

    public void Backspace()
    {
        if (Guess.Length == 0)
            return;

        Guess = Guess.Remove(Guess.Length - 1);
    }

    public void SubmitGuess()
    {
        if (!Game.IsValidGuess(Guess)) return;
        Game.SubmitGuess(Guess);
        Guess = string.Empty;
    }

    public void StartNewGame()
    {
        Game.StartNewGame();
    }
}